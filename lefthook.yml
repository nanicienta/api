pre-commit:
  commands:
    lint:
      run: |
        for dir in $(grep '^[[:space:]]*[^#]' go.work | grep -o './[^"]*'); do
          echo "ğŸ” Linting $dir"
          (cd "$dir" && golangci-lint run --timeout 5m --out-format=colored-line-number || exit 1)
        done
    check-fmt:
      run: |
        unformatted=$(gofmt -s -l .)
        [ -z "$unformatted" ] || (echo "$unformatted" && exit 1)
commit-msg:
  commands:
    validate-commit:
      run: bash ./scripts/validate-commit.sh {1}